<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flipbook Magazine</title>
  <style>
    :root {
      --page-w: 820px;
      --page-h: 1060px;
      --nav-h: 64px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; background: #ffffff; color: #111; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    .viewport { position: relative; height: calc(100vh - var(--nav-h)); display: flex; align-items: center; justify-content: center; padding: 20px 0; }
    #book-wrapper { transform-origin: top center; transition: transform .2s ease; }
    #flipbook { width: calc(var(--page-w) * 2); height: var(--page-h); }
    #flipbook .page { width: var(--page-w); height: var(--page-h); background: #fafafa; position: relative; box-shadow: 0 20px 45px rgba(0,0,0,.12); }
    #flipbook .page img { width: 100%; height: 100%; object-fit: cover; display: block; }
    #flipbook .page.odd::before, #flipbook .page.even::before {
      content: ""; position: absolute; top: 0; bottom: 0; width: 26px; pointer-events: none; mix-blend-mode: multiply;
    }
    #flipbook .page.odd::before { right: 0; background: linear-gradient(90deg, rgba(0,0,0,.18), transparent); }
    #flipbook .page.even::before { left: 0; background: linear-gradient(270deg, rgba(0,0,0,.16), transparent); }
    .nav { height: var(--nav-h); display: flex; align-items: center; justify-content: center; gap: 16px; border-top: 1px solid rgba(0,0,0,.08); background: #fff; position: sticky; bottom: 0; }
    .nav button { border: 0; background: rgba(0,0,0,.08); color: #111; padding: 8px 16px; border-radius: 999px; font-weight: 600; cursor: pointer; }
    .nav button:disabled { opacity: .35; cursor: default; }
    .nav .status { min-width: 90px; text-align: center; color: #444; }
    @media (max-width: 900px) { :root { --page-w: 600px; --page-h: 820px; } }
    @media (max-width: 640px) { :root { --page-w: 480px; --page-h: 680px; } }
  </style>
</head>
<body>
  <div class="viewport">
    <div id="book-wrapper">
      <div id="flipbook">
        <div class="page cover odd"><img alt="Page 1" loading="lazy" decoding="async" src="images/Page_01.jpg" /></div>
        <div class="page even"><img alt="Page 2" loading="lazy" decoding="async" src="images/Page_02.jpg" /></div>
        <div class="page odd"><img alt="Page 3" loading="lazy" decoding="async" src="images/Page_03.jpg" /></div>
        <div class="page even"><img alt="Page 4" loading="lazy" decoding="async" src="images/Page_04.jpg" /></div>
        <div class="page odd"><img alt="Page 5" loading="lazy" decoding="async" src="images/Page_05.jpg" /></div>
        <div class="page even"><img alt="Page 6" loading="lazy" decoding="async" src="images/Page_06.jpg" /></div>
        <div class="page odd"><img alt="Page 7" loading="lazy" decoding="async" src="images/Page_07.jpg" /></div>
        <div class="page even"><img alt="Page 8" loading="lazy" decoding="async" src="images/Page_08.jpg" /></div>
        <div class="page odd"><img alt="Page 9" loading="lazy" decoding="async" src="images/Page_09.jpg" /></div>
        <div class="page even"><img alt="Page 10" loading="lazy" decoding="async" src="images/Page_10.jpg" /></div>
        <div class="page odd"><img alt="Page 11" loading="lazy" decoding="async" src="images/Page_11.jpg" /></div>
        <div class="page even"><img alt="Page 12" loading="lazy" decoding="async" src="images/Page_12.jpg" /></div>
        <div class="page odd"><img alt="Page 13" loading="lazy" decoding="async" src="images/Page_13.jpg" /></div>
        <div class="page even"><img alt="Page 14" loading="lazy" decoding="async" src="images/Page_14.jpg" /></div>
        <div class="page odd"><img alt="Page 15" loading="lazy" decoding="async" src="images/Page_15.jpg" /></div>
        <div class="page even"><img alt="Page 16" loading="lazy" decoding="async" src="images/Page_16.jpg" /></div>
        <div class="page odd"><img alt="Page 17" loading="lazy" decoding="async" src="images/Page_17.jpg" /></div>
        <div class="page even"><img alt="Page 18" loading="lazy" decoding="async" src="images/Page_18.jpg" /></div>
        <div class="page odd"><img alt="Page 19" loading="lazy" decoding="async" src="images/Page_19.jpg" /></div>
        <div class="page even"><img alt="Page 20" loading="lazy" decoding="async" src="images/Page_20.jpg" /></div>
        <div class="page odd"><img alt="Page 21" loading="lazy" decoding="async" src="images/Page_21.jpg" /></div>
      </div>
    </div>
  </div>
  <div class="nav">
    <button id="prev" aria-label="Previous page">◀</button>
    <div class="status" id="status">1 / 21</div>
    <button id="next" aria-label="Next page">▶</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/4.1.0/turn.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
    (function() {
      var total = 21;
      var $flip = $('#flipbook');
      var $wrap = $('#book-wrapper');
      var $status = $('#status');
      var $prev = $('#prev');
      var $next = $('#next');

      function init() {
        if (!$flip.turn) { $status.text('Load error — refresh'); return; }
        $flip.turn({
          width: parseInt(getComputedStyle(document.documentElement).getPropertyValue('--page-w')) * 2,
          height: parseInt(getComputedStyle(document.documentElement).getPropertyValue('--page-h')),
          autoCenter: true,
          elevation: 50,
          gradients: true,
          duration: 1000,
          page: 1,
          display: 'single',
          when: {
            turned: function(e, page) { update(page); adjustDisplay(page); }
          }
        });
        update(1);
        adjustDisplay(1);
        resizeBook();
      }

      function adjustDisplay(page) {
        if (page === 1 || page === total) {
          $flip.turn('display', 'single');
        } else {
          $flip.turn('display', 'double');
        }
        setTimeout(resizeBook, 0);
      }

      function update(page) {
        $status.text(page + ' / ' + total);
        $prev.prop('disabled', page === 1);
        $next.prop('disabled', page === total);
      }

      function resizeBook() {
        var navH = document.querySelector('.nav').offsetHeight || 0;
        var availH = window.innerHeight - navH - 40;
        var availW = window.innerWidth - 20;
        var singleW = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--page-w'));
        var baseW = ($flip.turn('display') === 'single') ? singleW : singleW * 2;
        var baseH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--page-h'));
        var scale = Math.min(availW / baseW, availH / baseH, 1);
        $wrap.css('transform', 'scale(' + (scale > 0 ? scale : 0.1) + ')');
      }

      $prev.on('click', function() { $flip.turn('previous'); });
      $next.on('click', function() { $flip.turn('next'); });

      $(document).on('keydown', function(e) {
        if (e.key === 'ArrowLeft') $flip.turn('previous');
        if (e.key === 'ArrowRight') $flip.turn('next');
      });

      $(window).on('resize', resizeBook);

      $(init);
    })();
  </script>
</body>
</html>
